<!doctype html><html lang="es"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Cubo Runner Ultra Extremo</title><style>  html,body{margin:0;padding:0;height:100%;background:#000;overflow:hidden;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#fff;}  canvas{display:block;margin:0 auto;background:#000;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,0.9);}  .ui{position:absolute;top:10px;width:100%;display:flex;justify-content:space-around;font-weight:600;font-size:16px;color:#fff;z-index:10;}  button{position:absolute;top:10px;right:10px;padding:8px 12px;border:none;border-radius:8px;background:#3b82f6;color:#fff;cursor:pointer;}</style></head><body><div class="ui">  <div>Puntuación: <span id="score">0</span></div>  <div>Mejor: <span id="best">0</span></div>  <div>Escudo: <span id="shield">OFF</span></div>  <div>Nivel: <span id="level">1</span></div></div><button id="startBtn">Iniciar / Reintentar</button><canvas id="game" width="900" height="520" tabindex="0"></canvas><script>const canvas=document.getElementById('game');const ctx=canvas.getContext('2d');canvas.focus(); // dar foco al cargar para detectar tecladoconst W=canvas.width,H=canvas.height;const scoreEl=document.getElementById('score');const bestEl=document.getElementById('best');const shieldEl=document.getElementById('shield');const levelEl=document.getElementById('level');const startBtn=document.getElementById('startBtn');let running=false,lastTime=0,score=0,level=1;let best=parseInt(localStorage.getItem('cubo_best')||'0')||0; bestEl.textContent=best;let distance=0,speed=300,spawnTimer=0,spawnInterval=1.2;let obstacles=[],coins=[],lightBeams=[],particles=[];let miniBoss=false,bossTimer=0;let shieldActive=false,shieldTimer=0;let screenShake=0;const player={x:140,baseY:H-90,y:H-90,size:44,vy:0,grounded:true,jumpPower:-13,split:false,trail:[]};function getRGBColor(t){const r=Math.floor(127*Math.sin(t*2)+128);const g=Math.floor(127*Math.sin(t*2+2)+128);const b=Math.floor(127*Math.sin(t*2+4)+128);return `rgb(${r},${g},${b})`;}function rand(a,b){return a+Math.random()*(b-a);}function collision(p,o){const px=p.x-p.size/2,py=p.y-p.size/2,pw=p.size,ph=p.size; return px<o.x+o.w && px+pw>o.x && py<o.y+o.h && py+ph>o.y;}function spawnObstacle(){const baseY=H-60; obstacles.push({x:W+90,w:rand(30,100),h:rand(24,70),y:baseY-rand(0,50),passed:false,color:getRGBColor(Math.random()*10),tilt:rand(-0.3,0.3),vx:rand(-20-level*5,20+level*5),vy:rand(-10,10),destructible:Math.random()<0.3});}function spawnCoin(){const y=rand(H-200,H-80); coins.push({x:W+50,y,y,size:20,color:getRGBColor(Math.random()*10),collected:false,boost:false});}function spawnParticle(x,y,color,dx,dy,size,life){particles.push({x,y,dx:dx||rand(-2,2),dy:dy||rand(-5,-1),color,size:size||rand(2,5),life:life||rand(20,40)});}function spawnLightBeam(){lightBeams.push({x:rand(0,W),y:0,length:rand(80,200),speed:rand(600,1200)+level*50,color:getRGBColor(Math.random()*10)});}window.addEventListener('keydown',e=>{  canvas.focus();  if(e.code==='Space'){     e.preventDefault();     if(!running) start();     if(player.grounded){player.vy=player.jumpPower; player.grounded=false; for(let i=0;i<10;i++){spawnParticle(player.x,player.y,getRGBColor(Math.random()*10));}}  }  if(e.code==='ArrowDown'){player.split=true;}});window.addEventListener('keyup',e=>{if(e.code==='ArrowDown') player.split=false;});startBtn.addEventListener('click',start);function start(){  running=true; lastTime=performance.now(); score=0; distance=0; speed=300; level=1; levelEl.textContent=level;  spawnTimer=0; spawnInterval=1.1; obstacles=[]; coins=[]; particles=[]; lightBeams=[];  player.y=player.baseY; player.vy=0; player.grounded=true; player.split=false; player.trail=[];  shieldActive=false; shieldTimer=0; shieldEl.textContent='OFF'; screenShake=0; miniBoss=false; bossTimer=0;  requestAnimationFrame(loop);}function loop(t){  if(!running) return;  const dt=Math.min((t-lastTime)/1000,0.05); lastTime=t;  update(dt);  draw(t/500);  requestAnimationFrame(loop);}function update(dt){  speed=300+distance*0.18+level*20;  spawnInterval=Math.max(0.3,1.2-distance/4000-level*0.05);  player.vy+=34*dt; player.y+=player.vy; if(player.y>player.baseY){player.y=player.baseY; player.vy=0; player.grounded=true;}  spawnTimer+=dt;  if(spawnTimer>spawnInterval){    spawnTimer=0;    spawnObstacle();    if(Math.random()<0.2) spawnCoin();    if(Math.random()<0.15) spawnLightBeam();  }  for(let o of obstacles){o.x-=speed*dt+o.vx*dt; o.y+=o.vy*dt; if(!o.passed && o.x+o.w<player.x-player.size/2){o.passed=true; score+=5; for(let i=0;i<5;i++) spawnParticle(o.x+o.w/2,o.y+o.h/2,getRGBColor(Math.random()*10));}} obstacles=obstacles.filter(o=>o.x+o.w>-200);  for(let c of coins){c.x-=speed*dt; if(!c.collected && collision(player,c)){c.collected=true; shieldActive=true; shieldTimer=3; shieldEl.textContent='ON'; for(let i=0;i<15;i++) spawnParticle(c.x,c.y,getRGBColor(Math.random()*10)); c.boost=true;}} coins=coins.filter(c=>!c.collected && c.x+c.size>-50);  if(shieldActive){shieldTimer-=dt; if(shieldTimer<=0){shieldActive=false; shieldEl.textContent='OFF';}}  distance+=speed*dt*0.75; score=Math.floor(distance/2); scoreEl.textContent=score; if(score>best){best=score; localStorage.setItem('cubo_best',best); bestEl.textContent=best;}  if(score>level*500){level++; levelEl.textContent=level; for(let i=0;i<30;i++) spawnParticle(rand(0,W),rand(0,H),getRGBColor(Math.random()*10));}  if(level%3===0 && !miniBoss){miniBoss=true; bossTimer=10; for(let i=0;i<20;i++){spawnObstacle();}}  if(miniBoss){bossTimer-=dt; if(bossTimer<=0) miniBoss=false;}  for(let o of obstacles){if(!shieldActive && collision(player,o)){screenShake=10; endGame(); break;}}  for(let p of particles){p.x+=p.dx; p.y+=p.dy; p.life-=1;} particles=particles.filter(p=>p.life>0);  for(let l of lightBeams){l.y+=l.speed*dt;} lightBeams=lightBeams.filter(l=>l.y< H+100);  player.trail.push({x:player.x, y:player.y, life:5}); if(player.trail.length>50) player.trail.shift();}function draw(t){  ctx.save();  if(screenShake>0){const shakeX=rand(-screenShake,screenShake),shakeY=rand(-screenShake,screenShake); ctx.translate(shakeX,shakeY); screenShake-=0.5;}  const grad=ctx.createLinearGradient(0,0,0,H); grad.addColorStop(0,getRGBColor(t)); grad.addColorStop(1,getRGBColor(t+1.5)); ctx.fillStyle=grad; ctx.fillRect(0,0,W,H);  ctx.fillStyle='rgba(255,255,255,0.05)'; ctx.fillRect(0,H-50,W,50);  for(let l of lightBeams){ctx.strokeStyle=l.color; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(l.x,l.y); ctx.lineTo(l.x,l.y+l.length); ctx.stroke();}  for(let o of obstacles){ctx.save(); ctx.translate(o.x+o.w/2,o.y+o.h/2); ctx.rotate(o.tilt); ctx.fillStyle=o.color; ctx.fillRect(-o.w/2,-o.h/2,o.w,o.h); ctx.strokeStyle='rgba(0,0,0,0.7)'; ctx.lineWidth=2; ctx.strokeRect(-o.w/2,-o.h/2,o.w,o.h); ctx.restore();}  for(let c of coins){ctx.fillStyle=c.color; ctx.beginPath(); ctx.arc(c.x,c.y,c.size/2,0,Math.PI*2); ctx.fill(); ctx.strokeStyle='rgba(0,0,0,0.7)'; ctx.lineWidth=2; ctx.stroke();}  for(let p of particles){ctx.fillStyle=p.color; ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fill();}  for(let i=0;i<player.trail.length;i++){const tr=player.trail[i]; ctx.fillStyle=`rgba(255,255,255,${tr.life/5})`; ctx.fillRect(tr.x-5,tr.y-5,10,10); tr.life-=0.1;}  const px=player.x-player.size/2, py=player.y-player.size/2;  if(shieldActive){ctx.strokeStyle=getRGBColor(t); ctx.lineWidth=6; ctx.strokeRect(px-5,py-5,player.size+10,player.size+10);}  if(player.split){ctx.fillStyle=getRGBColor(t); ctx.fillRect(px,py,player.size/2,player.size); ctx.fillRect(px+player.size/2,py,player.size/2,player.size); ctx.strokeStyle='rgba(0,0,0,0.7)'; ctx.lineWidth=2; ctx.strokeRect(px,py,player.size/2,player.size); ctx.strokeRect(px+player.size/2,py,player.size/2,player.size);}  else{ctx.fillStyle=getRGBColor(t); ctx.fillRect(px,py,player.size,player.size); ctx.strokeStyle='rgba(0,0,0,0.7)'; ctx.lineWidth=2; ctx.strokeRect(px,py,player.size,player.size);}  ctx.restore();}function endGame(){running=false; setTimeout(()=>alert('Game Over — Puntuación: '+score),40);}</script></body></html>